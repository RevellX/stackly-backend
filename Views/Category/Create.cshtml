@model StacklyBackend.Models.CategoryCreate
@using Microsoft.CodeAnalysis.Differencing
@{
    var error = ViewData["Error"] as string;
    ViewData["Title"] = "Create";
}
<h2>Category - @ViewData["Title"]</h2>
<p>Selected group:</p>
@await Component.InvokeAsync("GroupDropdown")
<a href="/category"><button aria-label="Go back">Go to list</button></a>
<p>Category form: </p>

@if (!string.IsNullOrEmpty(error))
{
    <div role="alert" class="validation-summary-errors">
        @error
    </div>
}

<form action="/category/create" method="post">
    @Html.AntiForgeryToken()
    <div>
        <label for="Name">Name</label>
        <input type="text" id="Name" name="Name" value="@Model?.Name"/>
    </div>
        <div>
        <label for="GroupId">Group</label>
        <select name="GroupId" id="GroupId" value="@Model?.GroupId">
        <option disabled selected>-- Wybierz grupÄ™ --</option>            
        @foreach (var grp in (ViewData["groups"] as IEnumerable<StacklyBackend.Models.Group>) ?? Array.Empty<StacklyBackend.Models.Group>())
            {
                <option selected='@(Model?.GroupId == grp.Id ? "selected" : null)' value="@grp.Id">@grp.Name</option>
            }
        </select>
    </div>
    <button type="submit">Create</button>
</form>